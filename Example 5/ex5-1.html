<!DOCTYPE html>
<html lang="en">
<head>
	
	<!-- Dynamically render toggles using jQuery -->
	

	<meta charset="UTF-8">
	<title>Example 5-1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
    <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.0/css/bootstrap-toggle.min.css" rel="stylesheet">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.2/handlebars.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.0/js/bootstrap-toggle.min.js"></script>
	



	<!-- //////////////////////////// -->
    <!-- ////// Part 1: Define ////// -->
    <!-- //////////////////////////// -->

	<!-- Template for collection -->
	<script id="collectionTemplate" type="text/x-handlebars-template">
		<div>
			<h2>{{ this.[0].collectionName }} collection:</h2>
			<hr>
			<ol>
				{{#each [] }}
				<li><b>{{this.name}}</b></li>
					<ul>
						<li>Location: {{this.location}}</li>
						<li>Department: {{this.department}}</li>
						<li>Eye color: {{this.eyeColor}}</li>
						<li>Home state: {{this.homeState}}</li>
					</ul>
				{{/each}}
			</ol>
		</div>
	</script>

	<script>

		$(document).ready(function() {



			/* 
			- Array < objects < keys < values
			- var keyVals = {};
			- Loop over keys; 
				if key not in keyVals, add it as a new key whose value is an empty array 
				while looping over the key, get 
			keyVals = {
				location: [], 
				department: [],
				eyeColor: []
			}
			- Next loop over values



			*/
				

			////// JSON employees //////
			var allEmployeesObj = [
				{
					"id": 1, 
					"name": "Jack",  
					"title": "Senior Astronaut",
					"location": "New York City", 
					"department": "IT", 
					"collectionName": "All Employees",
					"eyeColor" : "Blue", 
					"homeState": "NY" 
				},
				{
					"id": 2,
					"name": "Andres",
					"title": "Deep Sea Diver",
					"location": "New York City",
					"department": "IT",
					"collectionName": "All Employees", 
					"eyeColor" : "Brown",
					"homeState": "NJ"
				},
				{
					"id": 3,
					"name": "Chris",
					"title": "Senior Pastry Chef",
					"location": "London",
					"department": "IT",
					"collectionName": "All Employees",
					"eyeColor" : "Green",
					"homeState": "NY"
				},
				{
					"id": 4,
					"name": "Liza",
					"title": "Junior Web Developer",
					"location": "Brussels",
					"department": "IT",
					"collectionName": "All Employees",
					"eyeColor" : "Brown",
					"homeState": "NY"
				},
				{
					"id": 5,
					"name": "Monica",
					"title": "HR Manager",
					"location": "London",
					"department": "HR",
					"collectionName": "All Employees",
					"eyeColor" : "Brown",
					"homeState": "NJ"
				},
				{
					"id": 6,
					"name": "Erinn",
					"title": "Senior Conference Coordinator",
					"location": "London",
					"department": "Conferences",
					"collectionName": "All Employees",
					"eyeColor" : "Green",
					"homeState": "NJ"
				},
				{
					"id": 7,
					"name": "Kelsey",
					"title": "Junior Conference Coordinator",
					"location": "New York City",
					"department": "Conferences",
					"collectionName": "All Employees",
					"eyeColor" : "Green",
					"homeState": "CT"
				},
				{
					"id": 8,
					"name": "Hussein",
					"title": "Senior Accountant",
					"location": "Brussels",
					"department": "Accounting",
					"collectionName": "All Employees",
					"eyeColor" : "Brown",
					"homeState": "VT"
				}
			];

			////////////////////////////
			/////// Dyn. Filters //////
			//////////////////////////

			// 1- Getting the H3s:

			// To capitalize the h3's: 
			function capitalizeFirstLetter(string) {
				return string.charAt(0).toUpperCase() + string.slice(1);
			}

			// Loop through first employee obj and turn each key into h3
			var keys = [];
			for ( var key in allEmployeesObj[0] ) {
				keys.push(key);
				// var capitalized = capitalizeFirstLetter(key);
				// $("#rendered-toggles").append("<h3>" + capitalized + "</h3>");
				// console.log("Capitalized: ", capitalized);
			};

			// Iterate over keys; For each key, create an h3 and insert into end of #rendered-toggles div
			$.each(keys, function(index, value) {
				// console.log("index: ", index, "value: ", value); 
				var capitalized = capitalizeFirstLetter(value);
				$("#rendered-toggles").append("<h3>" + capitalized + "</h3>");
			});


			/////// 2- Getting the toggles //////

			// Array < objects < keys < values 
			// Loop through objs in array, loop through keys
			// For every key, create new array with that name
			// For every value 


			var values = [];
			$.each( allEmployeesObj, function(index, obj) {
				// console.log( "Index: ", index, "Obj: ", obj ); 
				// obj = the object
				// console.log("Keys: ", Object.keys(obj) ); 
				// Loop over all keys in 
				for(var key in obj) {
					var value = obj[key];
					// console.log("Values: ", value); 
					// if value not in array, push it in:
					console.log("key:", key);

					if ( values.indexOf(value) == -1 ) {
						values.push(value); 
					};
				}
			}); 
			console.log("Values array: ", values);










		}); // end DOM ready fxn
	</script>
</head>
<body>
	<div class="container">
		<div class="container-fluid">
			<div id="allEmployeesContainer">

				<div class="row">
					<!-- Toggles: -->
					<div class="col-md-6" id="toggles">
						<h2>Filters:</h2>
						<hr>

						<h3>Location:</h3>
						<div class="location">
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="New York City" kind="location">
									New York City
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="London" kind="location">
									London
								</label>
							</div>			
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Brussels" kind="location">
									Brussels
								</label>
							</div>
						</div>

						<h3>Department:</h3>
						<div class="department">
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="IT" kind="department">
									IT
								</label>
							</div>			
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Accounting" kind="department">
									Accounting
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="HR" kind="department">
									HR
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Conferences" kind="department">
									Conferences
								</label>
							</div>
						</div>									

						<h3>Eye Color:</h3>
						<div class="eyeColor">
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Green" kind="eyeColor">
									Green
								</label>
							</div>			
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Brown" kind="eyeColor">
									Brown
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="Blue" kind="eyeColor">
									Blue
								</label>
							</div>
						</div>

						<h3>Home State:</h3>
						<div class="homeState">
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="NY" kind="homeState">
									New York
								</label>
							</div>			
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="NJ" kind="homeState">
									New Jersey
								</label>
							</div>
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="CT" kind="homeState">
									CT
								</label>
							</div>						
							<div class="checkbox">
								<label>
									<input name="checkOptions" type="checkbox" data-toggle="toggle" value="VT" kind="homeState">
									Vermont 
								</label>
							</div>						
						</div>
					</div> <!-- End Toggles -->	

					<!-- Rendered Toggles: -->
					<div class="col-md-6" id="rendered-toggles">
						<h2>Rendered Filters:</h2>
						<hr>
						<!-- ////////////////// -->
					</div> 

				</div>
				<br>
			</div>
		</div>
	</div>
</body>
</html>